<!DOCTYPE html>
<html>
	<head>
		<title>StackOverflow Clone</title>
		<%= csrf_meta_tags %>
		<%= csp_meta_tag %>

		<!-- Fomantic UI -->
		<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fomantic-ui/2.8.3/semantic.min.css">

		<%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
	</head>

	<body>
		<div class='ui attached stackable inverted menu'>
			<a class='header item' href='/'>StackOverflow Clone</a>
			<a class='item' href='/questions'>Questions</a>
			
			<div class='right menu'>
				<div class='item'>
					<div class='ui transparent inverted icon input'>
						<i class='search icon'></i>
						<input type='text' placeholder='search'>
					</div>
				</div>
				<% if current_user %>
					<div class='ui simple dropdown item'>
						<%= current_user.username %>
						<i class='dropdown icon'></i>
						<div class='menu'>
							<%= link_to 'Sign Out', signed_out_path, class: 'item' %>
						</div>
					</div>
				<% else %>
					<%= link_to 'Sign In', sign_in_path, class: 'item' %>
					<%= link_to 'Sign Up', new_user_path, class: 'item' %>
				<% end %>
			</div>
		</div>

		<%= yield %>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/fomantic-ui/2.8.3/semantic.min.js"></script>
		<%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>

		<% if flash[:error] %>
			<script type='text/javascript'>
				$('body').toast({
					title: 'Error',
					message: '<%= flash[:error] %>',
					showProgress: 'bottom',
					class: 'red',
					showIcon: 'ban',
				});
			</script>
		<% end %>

		<% if flash[:info] %>
			<script type='text/javascript'>
				$('body').toast({
					message: '<%= flash[:info] %>',
					showProgress: 'bottom',
					class: 'grey',
					showIcon: 'info',
				});
			</script>
		<% end %>
	</body>
</html>
